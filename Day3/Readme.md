## Digging into Windows Internals
### View Exported Function
- For viewing exported functions in a DLL, you can use Dependency Walker http://www.dependencywalker.com
- Just open the tool and click on open file and choose kernel32.dll from C:\windows\System32
![POC](https://github.com/SecTheBit/Windows-Internals/assets/46895441/093d2c22-0b7c-4da9-b768-60cd0ec0e9a3)

### Kernel Debugging
- Kernel Debugging means examining the internal kernel data structure or stepping through functions in the kernel
- There are particular set of files that we need in order to do kernel debugging, called as symbol files.
- When applications, libraries, drivers, or operating systems are linked, the linker that creates the .exe and .dll files also creates a number of additional files known as symbol files.
- Symbol files hold a variety of data which are not actually needed when running the binaries, but which could be very useful in the debugging process.
- Symbol files contain the names of functions and variables and the layout and format of data structures. They are generated by the linker and used by debuggers to reference and display these 
  names during a debug session. Read more about symbol files here https://learn.microsoft.com/en-us/windows-hardware/drivers/debugger/symbols-and-symbol-files
- To use any of the kernel-debugging tools to examine internal Windows kernel data structures such as the process list, thread blocks, loaded driver list, memory usage information, and so on, 
  we must have the correct symbol files for at least the kernel image, Ntoskrnl.exe
- For now, we will use windbg to see basics of kernel debugging
- We will do the local machine , due to which we will only have read access to kernel, because we won't be able to set up breakpoints on the machine on windbg is running.
- You can download windbg from here https://learn.microsoft.com/en-us/windows-hardware/drivers/debugger/
- Let's examine our own kernel

### Windbg Usage

* Getting Details of all Process using command ``` !process```
![POC](https://github.com/SecTheBit/Windows-Internals/assets/46895441/f14e22fc-9d06-47fd-a4fe-427adf7b8624)

* View all function in a kernel (click on nt -> functions)
![POC](https://github.com/SecTheBit/Windows-Internals/assets/46895441/93f08086-8f6c-4cb8-aa17-418db08a7512)

* View all the modules in the kernel (You can observer the "nt" module, "Ntoskrnl", which is heart of the kernel)
![POC](https://github.com/SecTheBit/Windows-Internals/assets/46895441/7e3b1e35-2d09-4129-8395-f07447d2d4f1)

* Display memory (bytes and ascii text)
![POC](https://github.com/SecTheBit/Windows-Internals/assets/46895441/fd24760e-54e9-4b4e-9bac-054e60bdc219)

* View Functions in Ntoskrnl Kernel Image
![POC](https://github.com/SecTheBit/Windows-Internals/assets/46895441/5a3890cc-c8d9-46ff-bd9f-8253f725e4a3)

* View Disassemble funtions (few bytes)
![POC](https://github.com/SecTheBit/Windows-Internals/assets/46895441/1a840017-a9c4-48a0-98ce-787b5535394d)

### Refrences
https://samsclass.info/126/proj/PMA410d.htm
https://www.youtube.com/watch?v=V75-TF8QOUI







  
